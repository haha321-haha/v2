<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding æŒ‰é’®è¯Šæ–­å·¥å…·</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #6366f1;
            margin-bottom: 20px;
        }
        .step {
            background: #f9fafb;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #6366f1;
            border-radius: 4px;
        }
        .code {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
        }
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #4f46e5;
        }
        .result {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Onboarding æŒ‰é’®è¯Šæ–­å·¥å…·</h1>

        <div class="step">
            <h3>ä½¿ç”¨è¯´æ˜ï¼š</h3>
            <ol>
                <li>ç¡®ä¿ onboarding æ¨¡æ€æ¡†å·²åœ¨é¡µé¢ä¸Šæ˜¾ç¤º</li>
                <li>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ‰§è¡Œè¯Šæ–­</li>
                <li>æŸ¥çœ‹è¯Šæ–­ç»“æœ</li>
                <li>å°†ç»“æœå¤åˆ¶ç»™æˆ‘</li>
            </ol>
        </div>

        <button onclick="runDiagnosis()">ğŸš€ æ‰§è¡Œè¯Šæ–­</button>
        <button onclick="copyResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>

        <div id="result" class="result" style="display:none;"></div>
    </div>

    <script>
        let diagnosisResult = '';

        function runDiagnosis() {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.textContent = 'æ­£åœ¨è¯Šæ–­...\n';

            // æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®çš„é¡µé¢
            if (!window.location.href.includes('localhost:3001')) {
                resultDiv.textContent = 'âš ï¸ è¯·å…ˆæ‰“å¼€ http://localhost:3001/en/downloads é¡µé¢ï¼Œç„¶ååˆ·æ–°æ­¤é¡µé¢å†æ‰§è¡Œè¯Šæ–­ã€‚';
                return;
            }

            let output = 'ğŸ” Onboarding æŒ‰é’®è¯Šæ–­ç»“æœ\n';
            output += '='.repeat(50) + '\n\n';

            // æŸ¥æ‰¾æ¨¡æ€æ¡†
            const modal = Array.from(document.querySelectorAll('.fixed')).find(el => {
                const zIndex = parseInt(window.getComputedStyle(el).zIndex) || 0;
                return zIndex >= 99999 && el.querySelector('.bg-white.rounded-2xl');
            }) || document.querySelector('[class*="fixed"][class*="inset-0"]');

            if (!modal) {
                output += 'âŒ æœªæ‰¾åˆ°æ¨¡æ€æ¡†ï¼\n';
                output += 'è¯·ç¡®ä¿ onboarding æ¨¡æ€æ¡†å·²æ˜¾ç¤ºã€‚\n';
                resultDiv.textContent = output;
                diagnosisResult = output;
                return;
            }

            output += 'âœ… æ‰¾åˆ°æ¨¡æ€æ¡†\n\n';

            const buttons = modal.querySelectorAll('button');
            output += `æ‰¾åˆ° ${buttons.length} ä¸ªæŒ‰é’®\n\n`;

            // æ£€æŸ¥æ¯ä¸ªæŒ‰é’®
            buttons.forEach((btn, i) => {
                const rect = btn.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const elementsAtPoint = document.elementsFromPoint(centerX, centerY);
                const styles = window.getComputedStyle(btn);

                const btnText = btn.textContent.trim().substring(0, 20) || btn.getAttribute('aria-label') || 'æ— æ–‡æœ¬';

                output += `æŒ‰é’® ${i+1}: ${btnText}\n`;
                output += `  pointer-events: ${styles.pointerEvents}\n`;
                output += `  cursor: ${styles.cursor}\n`;
                output += `  z-index: ${styles.zIndex}\n`;
                output += `  ä½ç½®: (${Math.round(rect.left)}, ${Math.round(rect.top)})\n`;
                output += `  å¤§å°: ${Math.round(rect.width)} x ${Math.round(rect.height)}\n`;

                // æ£€æŸ¥è¦†ç›–å±‚
                if (elementsAtPoint[0] === btn) {
                    output += `  è¦†ç›–å±‚: âœ… æœªè¢«è¦†ç›–ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æŒ‰é’®æœ¬èº«ï¼‰\n`;
                } else {
                    output += `  è¦†ç›–å±‚: âŒ è¢«è¦†ç›–ï¼ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯: ${elementsAtPoint[0].tagName}\n`;
                    output += `    ç±»å: ${(elementsAtPoint[0].className || '').substring(0, 50)}\n`;
                    output += `    z-index: ${window.getComputedStyle(elementsAtPoint[0]).zIndex}\n`;
                    output += `    pointer-events: ${window.getComputedStyle(elementsAtPoint[0]).pointerEvents}\n`;
                }

                // æµ‹è¯•ç‚¹å‡»
                let clicked = false;
                const clickHandler = () => { clicked = true; };
                btn.addEventListener('click', clickHandler, { once: true });
                btn.click();
                btn.removeEventListener('click', clickHandler);

                if (clicked) {
                    output += `  ç‚¹å‡»æµ‹è¯•: âœ… æˆåŠŸï¼ˆäº‹ä»¶è¢«è§¦å‘ï¼‰\n`;
                } else {
                    output += `  ç‚¹å‡»æµ‹è¯•: âŒ å¤±è´¥ï¼ˆäº‹ä»¶æœªè§¦å‘ï¼‰\n`;
                }

                output += '\n';
            });

            output += '='.repeat(50) + '\n';
            output += 'è¯Šæ–­å®Œæˆï¼è¯·å°†ä»¥ä¸Šç»“æœå¤åˆ¶ç»™æˆ‘ã€‚\n';

            resultDiv.textContent = output;
            diagnosisResult = output;
        }

        function copyResult() {
            if (!diagnosisResult) {
                alert('è¯·å…ˆæ‰§è¡Œè¯Šæ–­ï¼');
                return;
            }

            navigator.clipboard.writeText(diagnosisResult).then(() => {
                alert('âœ… ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(() => {
                // å¤‡ç”¨æ–¹æ³•
                const textarea = document.createElement('textarea');
                textarea.value = diagnosisResult;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('âœ… ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        }
    </script>
</body>
</html>






